{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block title %}Walls{% endblock %} 

{% block page_content %}

    {{ wtf.quick_form(msg_form, action="/post") }} 
    
    {% for post_result in post_results %}
        <section>
            <h3>{{ post_result['name'] }}</h3>
            <span>  {{ post_result['created_at'] }}</span>
            <p>{{ post_result['msg'] }}</p>
            
            <!-- post delete button -->
            <form action="/delete" method="POST">
                <input type="hidden" name="msg_id" value="{{ post_result['msg_id'] }}">
                <input type="hidden" name="user_id" value="{{ post_result['user_id'] }}">
                <input type="submit" name="submit" value="Delete">
            </form>
            
            {% for comment_result in comment_results %}
                {% if post_result['msg_id'] == comment_result['message_id'] %}
                    <div>
                        <h4>{{ comment_result['name'] }}</h4>
                        <span>{{ comment_result['created_at'] }}</span>
                        <p>{{ comment_result['comment'] }}</p>
                    </div>
                {% endif %}
            {% endfor %}
           

        
            <form action="/comment" class="form" method="POST">
                <!-- RECORD msg_id COMMENT LINKS TO -->
                <input type="hidden" name="msg_id_for_comment" value="{{ post_result['msg_id'] }}">
                <div class="form-group  required">
                    <label class="control-label" for="comment">Comment</label>
                    <textarea class="form-control" id="comment" name="comment" maxlength="140" required></textarea>
                </div>
                <input type="submit" name="submit_comment" value="comment">
            </form>
            <!-- POST DELETE BUTTON -->
            <form action="/delete" method="POST">
                <input type="hidden" name="msg_id" value="{{ post_result['msg_id'] }}">
                <input type="hidden" name="user_id" value="{{ post_result['user_id'] }}">
                <input type="submit" name="submit" value="Delete">
            </form>
        </section>
    {% endfor %}
{% endblock %}